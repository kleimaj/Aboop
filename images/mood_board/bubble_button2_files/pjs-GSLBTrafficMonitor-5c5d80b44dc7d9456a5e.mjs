(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["GSLBTrafficMonitor"],{QaG9:function(e,t,n){n.r(t),t.default=function(){if(!window.pinterest_rum_client_config)return;const e=JSON.parse(window.pinterest_rum_client_config.endpoints),t=JSON.parse(window.pinterest_rum_client_config.ids),n=JSON.parse(window.pinterest_rum_client_config.timeouts),r=performance.now();let o=1,s=null;const i={source_type:"js",metrics:[]};for(let a=e.length-1;a>0;a-=1){const t=Math.floor(Math.random()*(a+1));[e[a],e[t]]=[e[t],e[a]]}for(const a of e)i.metrics.push({result_version:1,endpoint_id:a.endpoint_id,result:Array(a.attempts)});function c(e){const t=new URL(e.target.src),n=new URLSearchParams(t.search),r=parseInt(n.get("id"),10),o=r%65536,s=Math.round(r/65536)%65536;if(void 0===performance)return;const c=performance.getEntriesByType("resource");if(!(void 0===c||c.length<=0)){for(const e of c)if(void 0!==e.name&&e.name===t.href){i.metrics[o].result[s].response_time=Math.ceil(e.responseEnd-e.startTime);break}switch(e.type){case"load":i.metrics[o].result[s].status_code=200;break;case"error":i.metrics[o].result[s].status_code=500}}}for(let a=0;a<e.length;a+=1){e[a].attempts>o&&(o=e[a].attempts);for(let r=0;r<e[a].attempts;r+=1){i.metrics[a].result[r]={status_code:0,response_time:Math.ceil(n.absolute_timeout)};const o=document.createElement("img"),s=window.crypto.getRandomValues(new Uint32Array(1))[0];o.onerror=c,o.onload=c,o.src=t[e[a].endpoint_id]+"?id="+(65536*r+a)+"&key="+s}}s=setInterval((function(){if(performance.now()-r<n.absolute_timeout)for(const n of i.metrics)for(const e of n.result)if(e&&0===e.status_code)return;clearInterval(s);const e=JSON.stringify(i),t=new XMLHttpRequest;t.open("POST",window.pinterest_rum_client_config.adapter_endpoint),t.send(e)}),n.check_interval)}}}]);
//# sourceMappingURL=pjs-GSLBTrafficMonitor-5c5d80b44dc7d9456a5e.mjs.map
